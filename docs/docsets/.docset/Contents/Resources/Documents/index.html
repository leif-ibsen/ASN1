<!DOCTYPE html>
<html lang="en">
  <head>
    <title>  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html"> Docs</a> (100% documented)</p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html"> Reference</a>
        <img id="carat" src="img/carat.png" alt=""/>
          Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ASN1.html">ASN1</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1BMPString.html">ASN1BMPString</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1BitString.html">ASN1BitString</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1Boolean.html">ASN1Boolean</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1Collection.html">ASN1Collection</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1Ctx.html">ASN1Ctx</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1GeneralizedTime.html">ASN1GeneralizedTime</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1IA5String.html">ASN1IA5String</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1Integer.html">ASN1Integer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1Null.html">ASN1Null</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1ObjectIdentifier.html">ASN1ObjectIdentifier</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1OctetString.html">ASN1OctetString</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1PrintableString.html">ASN1PrintableString</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1Sequence.html">ASN1Sequence</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1Set.html">ASN1Set</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1SimpleType.html">ASN1SimpleType</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1T61String.html">ASN1T61String</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:4ASN10A4TimeC">ASN1Time</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1UTCTime.html">ASN1UTCTime</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ASN1UTF8String.html">ASN1UTF8String</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/ASN1Exception.html">ASN1Exception</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:4ASN14Bytea">Byte</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:4ASN15Bytesa">Bytes</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h3><b>Description</b></h3>

<p>The ASN1 package implements a subset of the ASN1 (Abstract Syntax Notation One) specification in Swift.
It is intended to be used in writing cryptographic applications like ECIES and ECDSA in Swift.</p>

<p>ASN1 supports:</p>

<ul>
<li>Building ASN1 structures from their byte array representation</li>
<li>DER encoding of ASN1 structures</li>
<li>Displaying ASN1 structures</li>
<li>Definite length encoding and decoding</li>
<li>Indefinite length decoding of sets and sequences</li>
<li>Tag numbers less than 128</li>
<li>Universal (0) and context-specific (2) tag classes</li>
</ul>

<p>It supports the following ASN1 types:</p>

<ul>
<li>BitString</li>
<li>BMPString</li>
<li>Boolean</li>
<li>GeneralizedTime</li>
<li>IA5String</li>
<li>Integer</li>
<li>Null</li>
<li>ObjectIdentifier</li>
<li>OctetString</li>
<li>PrintableString</li>
<li>Sequence</li>
<li>Set</li>
<li>T61String</li>
<li>UTCTime</li>
<li>UTF8String</li>
</ul>

<h3><b>Usage</b></h3>

<p>In your project Package.swift file add a dependency like<br/></p>
<pre class="highlight plaintext"><code>  dependencies: [
  .package(url: "https://github.com/leif-ibsen/ASN1", from: "2.0.1"),
  ]
</code></pre>

<h3><b>Example 1</b></h3>

<p>Example 1 shows how to decode a byte array containing an ASN1 structure.</p>
<pre class="highlight plaintext"><code>import ASN1
import BigInt

// ASN1 encoding of a private key for the brainpoolP160r1 elliptic curve domain
let keyBytes: Bytes = [48, 84, 2, 1, 1, 4, 20, 41, 214, 158, 187, 255, 44, 248,
 248, 164, 95, 252, 51, 1, 186, 40, 137, 9, 116, 150, 79, 160, 11, 6, 9, 43, 36,
  3, 3, 2, 8, 1, 1, 1, 161, 44, 3, 42, 0, 4, 48, 46, 251, 62, 213, 248, 5, 82,
 62, 98, 171, 43, 207, 1, 175, 50, 2, 120, 7, 195, 112, 178, 217, 62, 194, 11,
 215, 59, 27, 221, 93, 51, 231, 135, 77, 120, 34, 107, 185, 154]

// Build the ASN1 structure - we happen to know it is a sequence
let seq = try ASN1.build(keyBytes) as! ASN1Sequence

print(seq)

// Extract the private key value - a large number
let privBytes = seq.get(1) as! ASN1OctetString
let privKey = BInt(magnitude: privBytes.value)

print("Private key =", privKey)
</code></pre>

<p>giving</br></p>
<pre class="highlight plaintext"><code>Sequence (4):
  Integer: 1
  Octet String (20): 29 d6 9e bb ff 2c f8 f8 a4 5f fc 33 01 ba 28 89 09 74 96 4f
  [0]:
    Object Identifier: 1.3.36.3.3.2.8.1.1.1
  [1]:
    Bit String (328): 00000100 00110000 00101110 11111011 00111110 11010101 11111000
                      00000101 01010010 00111110 01100010 10101011 00101011 11001111
                      00000001 10101111 00110010 00000010 01111000 00000111 11000011
                      01110000 10110010 11011001 00111110 11000010 00001011 11010111
                      00111011 00011011 11011101 01011101 00110011 11100111 10000111
                      01001101 01111000 00100010 01101011 10111001 10011010

Private key = 238854808789429455904277046626010014418497476175
</code></pre>

<h3><b>Example 2</b></h3>

<p>Example 2 shows how to build an ASN1 structure programmatically and encode it to a byte array.</p>
<pre class="highlight plaintext"><code>import ASN1
import BigInt

let privKey = BInt("238854808789429455904277046626010014418497476175")!

let seq = ASN1Sequence()
seq.add(ASN1Integer(BInt(1))).add(ASN1OctetString(privKey.asMagnitudeBytes()))
print(seq)

let b = seq.encode()
print("Byte array =", b)
</code></pre>

<p>giving</br></p>
<pre class="highlight plaintext"><code>Sequence (2):
  Integer: 1
  Octet String (20): 29 d6 9e bb ff 2c f8 f8 a4 5f fc 33 01 ba 28 89 09 74 96 4f

Byte array = [48, 25, 2, 1, 1, 4, 20, 41, 214, 158, 187, 255, 44, 248,
              248, 164, 95, 252, 51, 1, 186, 40, 137, 9, 116, 150, 79]
</code></pre>

<h3><b>Dependencies</b></h3>

<p>ASN1 requires Swift 5.0.</p>

<p>The ASN1 package depends on the BigInt package</p>
<pre class="highlight plaintext"><code>dependencies: [
    .package(url: "https://github.com/leif-ibsen/BigInt", from: "1.2.12"),
],
</code></pre>

<h3><b>References</b></h3>

<ul>
<li>Burton S. Kaliski Jr.: A Layman&rsquo;s Guide to a Subset of ASN.1, BER, and DER, 1993</li>
<li>John Larmouth: ASN.1 Complete, Open Systems Solutions 1999</li>
<li>ITU-T Recommendation X.690</li>
</ul>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2022 <a class="link" href="" target="_blank" rel="external noopener"></a>. All rights reserved. (Last updated: 2022-02-17)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
